drop table if exists accounts;
 
create table accounts (
    id int generated by default as identity,
    name varchar(100) not null,
    balance dec(15,2) not null,
    primary key(id)
);


drop table if exists login;

create table login(
	loginId int generated by default as identity,
	username varchar(20),
	passwords varchar(20),
	useroremploy int,
	primary key(loginId),
	constraint useroremploycheck check  (useroremploy<4)
)


create or replace procedure transfer(
   sender int,
   receiver int, 
   amount dec
)
language plpgsql    
as $$
begin
    -- subtracting the amount from the sender's account 
    update accounts 
    set balance = balance - amount 
    where id = sender;
 
    -- adding the amount to the receiver's account
    update accounts 
    set balance = balance + amount 
    where id = receiver;
 
    commit;
end;$$

---------------------------------------

 receiver int, 
create or replace procedure withdraw(
   sender int,
  
   amount dec
)
language plpgsql    
as $$
begin
    -- subtracting the amount from the sender's account 
    update accounts 
    set balance = balance - amount 
    where id = sender;

    commit;
end;$$

--------------------
sender int,
create or replace procedure deposit(
   
   receiver int, 
   amount dec
)
language plpgsql    
as $$
begin
    -- subtracting the amount from the sender's account 
    update accounts 
    set balance = balance + amount 
    where id = receiver;

    commit;
end;$$

